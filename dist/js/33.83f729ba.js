"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[33],{7078:function(t,e,r){var s=r(2578),a=r(4161);e.Z=(0,s.Q_)("courseStore",{state:()=>({allCourse:[],instructorCourse:[],studentCourse:[]}),actions:{getAllCourse(){const t="http://127.0.0.1:3000/api/courses",e=JSON.parse(localStorage.getItem("user")).token;a.Z.get(t,{headers:{Authorization:e}}).then((t=>{this.allCourse=t.data})).catch((t=>{console.log(t)}))}}})},4033:function(t,e,r){r.r(e),r.d(e,{default:function(){return z}});var s=r(3396),a=r(9242),o=r(7139);const l={class:"container-md p-5",style:{"margin-top":"64px"}},n=(0,s._)("h1",{class:"h3 mb-3 font-weight-normal"},"立即註冊課程",-1),c={class:"input-group mb-3"},i=(0,s._)("span",{class:"input-group-text",id:"basic-addon1"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})])],-1),u={style:{display:"flex","flex-wrap":"wrap"}},h={class:"card-body"},d={class:"card-title"},p={class:"card-text"},g={class:"card-text"},w={class:"card-text"},m={class:"card-text"},C=["onClick"];function _(t,e,r,_,b,f){return(0,s.wg)(),(0,s.iD)("div",l,[n,(0,s._)("div",c,[i,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"搜尋課程","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":e[0]||(e[0]=t=>b.search=t)},null,512),[[a.nr,b.search]])]),(0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.filterCourse,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"card m-3",style:{width:"18rem"},key:t._id},[(0,s._)("div",h,[(0,s._)("h5",d,"課程名稱："+(0,o.zw)(t.title),1),(0,s._)("p",p,(0,o.zw)(t.description),1),(0,s._)("p",g,"學生人數："+(0,o.zw)(t.students.length),1),(0,s._)("p",w,"課程價格："+(0,o.zw)(t.price),1),(0,s._)("p",m,"講師："+(0,o.zw)(t.instructor.username),1),(0,s._)("button",{type:"button",class:"btn btn-outline-primary",onClick:(0,a.iM)((e=>f.enrollCourse(t._id)),["prevent"])},"立即註冊",8,C)])])))),128))])])}r(7658);var b=r(2578),f=r(5639),v=r(7078),x={data(){return{search:""}},computed:{...(0,b.rn)(f.Z,["currentUser"]),...(0,b.rn)(v.Z,["allCourse"]),filterCourse(){return this.allCourse.filter((t=>t.title.match(this.search)||t.description.match(this.search)))}},methods:{...(0,b.nv)(v.Z,["getAllCourse"]),enrollCourse(t){const e=JSON.parse(localStorage.getItem("user")).token,r=`http://127.0.0.1:3000/api/courses/enroll/${t}`;this.$http.post(r,this.currentUser._id,{headers:{Authorization:e}}).then((t=>{console.log(t),window.alert("課程註冊成功"),this.$router.push("/course")})).catch((t=>{console.log(t)}))}},created(){void 0===this.currentUser.username?this.$router.push("/login"):"instructor"===this.currentUser.role?this.$router.push("/course"):this.getAllCourse()}},y=r(89);const k=(0,y.Z)(x,[["render",_]]);var z=k}}]);
//# sourceMappingURL=33.83f729ba.js.map