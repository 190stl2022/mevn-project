"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[602],{7078:function(e,t,r){var s=r(2578),o=r(4161);t.Z=(0,s.Q_)("courseStore",{state:()=>({allCourse:[],instructorCourse:[],studentCourse:[]}),actions:{getAllCourse(){const e="https://mevn-curd.onrender.com/courses",t=JSON.parse(localStorage.getItem("user")).token;o.Z.get(e,{headers:{Authorization:t}}).then((e=>{this.allCourse=e.data})).catch((e=>{console.log(e)}))}}})},9602:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var s=r(3396),o=r(9242),a=r(7139);const l={class:"container-md p-5",style:{"margin-top":"64px"}},n=(0,s._)("h1",{class:"h3 mb-3 font-weight-normal"},"立即註冊課程",-1),c={class:"input-group mb-3"},i=(0,s._)("span",{class:"input-group-text",id:"basic-addon1"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})])],-1),u={style:{display:"flex","flex-wrap":"wrap"}},d={class:"card-body"},h={class:"card-title"},p={class:"card-text"},g={class:"card-text"},m={class:"card-text"},w={class:"card-text"},C=["onClick"];function _(e,t,r,_,v,b){return(0,s.wg)(),(0,s.iD)("div",l,[n,(0,s._)("div",c,[i,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"搜尋課程","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":t[0]||(t[0]=e=>v.search=e)},null,512),[[o.nr,v.search]])]),(0,s._)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.filterCourse,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"card m-3",style:{width:"18rem"},key:e._id},[(0,s._)("div",d,[(0,s._)("h5",h,"課程名稱："+(0,a.zw)(e.title),1),(0,s._)("p",p,(0,a.zw)(e.description),1),(0,s._)("p",g,"學生人數："+(0,a.zw)(e.students.length),1),(0,s._)("p",m,"課程價格："+(0,a.zw)(e.price),1),(0,s._)("p",w,"講師："+(0,a.zw)(e.instructor.username),1),(0,s._)("button",{type:"button",class:"btn btn-outline-primary",onClick:(0,o.iM)((t=>b.enrollCourse(e._id)),["prevent"])},"立即註冊",8,C)])])))),128))])])}r(7658);var v=r(2578),b=r(5639),f=r(7078),x={data(){return{search:""}},computed:{...(0,v.rn)(b.Z,["currentUser"]),...(0,v.rn)(f.Z,["allCourse"]),filterCourse(){return this.allCourse.filter((e=>e.title.match(this.search)||e.description.match(this.search)))}},methods:{...(0,v.nv)(f.Z,["getAllCourse"]),enrollCourse(e){const t=JSON.parse(localStorage.getItem("user")).token,r=`https://mevn-curd.onrender.com/courses/enroll/${e}`;this.$http.post(r,this.currentUser._id,{headers:{Authorization:t}}).then((e=>{console.log(e),window.alert("課程註冊成功"),this.$router.push("/course")})).catch((e=>{console.log(e)}))}},created(){void 0===this.currentUser.username?this.$router.push("/login"):"instructor"===this.currentUser.role?this.$router.push("/course"):this.getAllCourse()}},y=r(89);const k=(0,y.Z)(x,[["render",_]]);var z=k}}]);
//# sourceMappingURL=602.37d6636d.js.map